<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>QR Code Generator</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            font-family: Arial, sans-serif;
            background-color: #f5f5f5;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h1 {
            font-size: 2.5em;
            color: #333;
            text-align: center;
            margin-bottom: 20px;
        }
        .main-section {
            display: flex;
            flex-direction: row;
            width: 100%;
            max-width: 1200px;
            gap: 20px;
        }
        .left-section {
            flex: 0 0 70%;
            padding: 20px;
        }
        .right-section {
            flex: 0 0 30%;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        h2 {
            font-size: 1.8em;
            color: #333;
            margin-bottom: 15px;
        }
        h3 {
            font-size: 1.3em;
            color: #555;
            margin: 15px 0 10px;
        }
        label {
            display: block;
            font-size: 1.1em;
            color: #666;
            margin-bottom: 5px;
        }
        input[type="text"] {
            width: 100%;
            padding: 10px;
            font-size: 1em;
            border: 1px solid #ccc;
            border-radius: 4px;
            margin-bottom: 20px;
        }
        .options {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .option {
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .option.selected {
            background-color: #ddd;
        }
        .color-option {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            cursor: pointer;
            border: 1px solid #ccc;
        }
        .color-option.selected {
            border: 2px solid #000;
        }
        .qr-wrapper {
            position: relative;
            width: 300px;
            height: 350px;
        }
        button {
            display: flex;
            align-items: center;
            padding: 10px 20px;
            font-size: 1.1em;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #0056b3;
        }
        button:hover .arrow {
            transform: translateX(5px);
        }
        .arrow {
            display: inline-block;
            margin-left: 10px;
            transition: transform 0.3s;
        }
        .features-list {
            display: flex;
            gap: 20px;
            margin: 20px 0;
        }
        .feature-item {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 1em;
            color: #333;
        }
        .feature-item::before {
            content: "✔";
            color: green;
        }
        p {
            font-size: 0.9em;
            color: #666;
            text-align: center;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <h1>Reimagine how you reach, share, and engage with your audience</h1>
    <div class="main-section">
        <div class="left-section">
            <h2>Create a Free QR Code</h2>
            <label>1. Enter your URL destination</label>
            <input type="text" id="url-input" placeholder="https://" value="https://example.com">
            <h3>2. Select a style (optional)</h3>
            <div class="options">
                <div class="option pattern-option selected" data-pattern="square">Squares</div>
                <div class="option pattern-option" data-pattern="dots">Dots</div>
                <div class="option pattern-option" data-pattern="classy">Classy</div>
            </div>
            <div class="options">
                <div class="option corner-option selected" data-corner="square">Square</div>
                <div class="option corner-option" data-corner="rounded">Rounded</div>
            </div>
            <h3>3. Choose your color (optional)</h3>
            <div class="options">
                <div class="color-option selected" data-color="#000000" style="background-color: #000000;"></div>
                <div class="color-option" data-color="#ff0000" style="background-color: #ff0000;"></div>
                <div class="color-option" data-color="#00ff00" style="background-color: #00ff00;"></div>
                <div class="color-option" data-color="#0000ff" style="background-color: #0000ff;"></div>
            </div>
            <h3>4. Select a frame (optional)</h3>
            <div class="options">
                <div class="option frame-option selected" data-frame="none">No Frame</div>
                <div class="option frame-option" data-frame="border-only">Frame</div>
                <div class="option frame-option" data-frame="text">Frame + Scan Me</div>
                <div class="option frame-option" data-frame="arrow">Curved Arrow + Scan Me</div>
            </div>
            <button onclick="generateQR()">Get your QR code for free <span class="arrow">→</span></button>
            <h2>Sign up for free. Your free plan includes:</h2>
            <div class="features-list">
                <div class="feature-item">2 QR Codes/month</div>
                <div class="feature-item">Unlimited QR Code scans</div>
                <div class="feature-item">QR Code customizations</div>
            </div>
        </div>
        <div class="right-section">
            <div class="qr-wrapper">
                <div id="qrcode"></div>
            </div>
            <p>Note: This is a standard QR Code preview. Create your account for free and download your customized QR Code!</p>
        </div>
    </div>
    <!-- Load QRCode-Styling library from CDN -->
    <script src="https://unpkg.com/qr-code-styling@1.6.0-rc.1/lib/qr-code-styling.js"></script>
    <script>
        window.onload = function() {
            let currentPattern = 'square';
            let currentCorner = 'square';
            let currentColor = '#000000';
            let currentFrame = 'none';

            function generateQR() {
                const url = document.getElementById('url-input').value || 'https://example.com';
                const qrDiv = document.getElementById('qrcode');
                qrDiv.innerHTML = '';

                // Initialize QRCode-Styling
                const qrCode = new QRCodeStyling({
                    width: 250,
                    height: 250,
                    data: url,
                    margin: 4,
                    dotsOptions: {
                        color: currentColor,
                        type: currentPattern // 'square', 'dots', or 'classy'
                    },
                    cornersSquareOptions: {
                        type: currentCorner === 'rounded' ? 'extra-rounded' : 'square'
                    },
                    backgroundOptions: {
                        color: '#ffffff'
                    },
                    qrOptions: {
                        errorCorrectionLevel: 'H'
                    }
                });

                // Create a larger canvas for QR code and frames
                const canvas = document.createElement('canvas');
                canvas.width = 300;
                canvas.height = 350;
                qrDiv.appendChild(canvas);
                const ctx = canvas.getContext('2d');

                // Render QR code to a temporary div
                const tempDiv = document.createElement('div');
                qrCode.append(tempDiv);

                // Wait for the QR code canvas to be created
                setTimeout(() => {
                    const qrCanvas = tempDiv.querySelector('canvas');
                    if (qrCanvas) {
                        // Draw QR code onto the main canvas at (25, 25)
                        ctx.drawImage(qrCanvas, 25, 25, 250, 250);

                        // Draw frames
                        ctx.strokeStyle = currentColor;
                        ctx.fillStyle = currentColor;
                        if (currentFrame === 'border-only') {
                            ctx.lineWidth = 5;
                            ctx.strokeRect(15, 15, 270, 270);
                        } else if (currentFrame === 'text') {
                            ctx.lineWidth = 5;
                            ctx.strokeRect(15, 15, 270, 270);
                            ctx.font = '20px Arial';
                            ctx.textAlign = 'center';
                            ctx.fillText('Scan Me', 150, 320);
                        } else if (currentFrame === 'arrow') {
                            ctx.lineWidth = 5;
                            // Define the curve's start and end points, 16px away from the QR code's left border (x=25)
                            const startX = 0 + 16; // Corrected: 16px away from QR code's left border (x=25)
                            const startY = 275;
                            const endX = startX; // Vertical curve, same x-coordinate
                            const endY = 30;    // End just below the arrowhead tip to avoid popping out

                            // Draw the vertical curve
                            ctx.beginPath();
                            ctx.moveTo(startX, startY); // Start at new position
                            ctx.quadraticCurveTo(startX - 10, (startY + endY) / 2, endX, endY); // Curve vertically
                            ctx.stroke();

                            // Draw arrowhead at the top, pointing up (no rotation)
                            const arrowTipY = 15; // Arrowhead tip slightly above the curve's end
                            ctx.beginPath();
                            ctx.moveTo(endX, arrowTipY); // Tip of arrowhead
                            ctx.lineTo(endX - 15, arrowTipY + 55); // Left wing
                            ctx.lineTo(endX + 15, arrowTipY + 55); // Right wing (adjusted for symmetry)
                            ctx.closePath();
                            ctx.fillStyle = '#000000'; // Black arrowhead
                            ctx.fill();

                            // Draw "Scan Me" text below
                            ctx.font = '20px Arial';
                            ctx.textAlign = 'center';
                            ctx.fillStyle = currentColor;
                            ctx.fillText('Scan Me', 150, 320);
                        }
                    } else {
                        console.error('QR code canvas not found');
                    }
                }, 100);
            }

            // Event listeners for pattern options
            document.querySelectorAll('.pattern-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.pattern-option').forEach(opt => opt.classList.remove('selected'));
                    option.classList.add('selected');
                    currentPattern = option.dataset.pattern;
                    generateQR();
                });
            });

            // Event listeners for corner options
            document.querySelectorAll('.corner-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.corner-option').forEach(opt => opt.classList.remove('selected'));
                    option.classList.add('selected');
                    currentCorner = option.dataset.corner;
                    generateQR();
                });
            });

            // Event listeners for color options
            document.querySelectorAll('.color-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.color-option').forEach(opt => opt.classList.remove('selected'));
                    option.classList.add('selected');
                    currentColor = option.dataset.color;
                    generateQR();
                });
            });

            // Event listeners for frame options
            document.querySelectorAll('.frame-option').forEach(option => {
                option.addEventListener('click', () => {
                    document.querySelectorAll('.frame-option').forEach(opt => opt.classList.remove('selected'));
                    option.classList.add('selected');
                    currentFrame = option.dataset.frame;
                    generateQR();
                });
            });

            // Regenerate QR code when URL input changes
            document.getElementById('url-input').addEventListener('input', generateQR);

            // Generate initial QR code
            generateQR();
        };
    </script>
</body>
</html>